From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: ProstoyArtemka <ProstoyArtemka@yandex.ru>
Date: Wed, 3 Jan 2024 19:05:38 +0700
Subject: [PATCH] Fixes & gradle renames


diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index 36c68a6e2bc49b5192fb4d27f174b520e59430c6..e5cb72b5722219e009125e47a233d3c877ea85c5 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -23,20 +23,7 @@ import java.io.FileNotFoundException;
 import java.io.IOException;
 import java.io.InputStreamReader;
 import java.net.InetAddress;
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.LinkedHashMap;
-import java.util.LinkedHashSet;
-import java.util.List;
-import java.util.Locale;
-import java.util.Map;
-import java.util.Optional;
-import java.util.Set;
-import java.util.UUID;
+import java.util.*;
 import java.util.function.Consumer;
 import java.util.logging.Level;
 import java.util.logging.Logger;
@@ -184,6 +171,7 @@ import org.bukkit.craftbukkit.packs.CraftDataPackManager;
 import org.bukkit.craftbukkit.potion.CraftPotionBrewer;
 import org.bukkit.craftbukkit.profile.CraftPlayerProfile;
 import org.bukkit.craftbukkit.scheduler.CraftScheduler;
+import org.bukkit.craftbukkit.scheduler.MinecraftInternalPlugin;
 import org.bukkit.craftbukkit.scoreboard.CraftCriteria;
 import org.bukkit.craftbukkit.scoreboard.CraftScoreboardManager;
 import org.bukkit.craftbukkit.structure.CraftStructureManager;
@@ -253,6 +241,8 @@ import org.bukkit.scoreboard.Criteria;
 import org.bukkit.structure.StructureManager;
 import org.bukkit.util.StringUtil;
 import org.bukkit.util.permissions.DefaultPermissions;
+import org.ospaindustries.event.ArmorListener;
+import org.ospaindustries.event.DispenserArmorListener;
 import org.yaml.snakeyaml.LoaderOptions;
 import org.yaml.snakeyaml.Yaml;
 import org.yaml.snakeyaml.constructor.SafeConstructor;
@@ -264,7 +254,7 @@ import javax.annotation.Nullable; // Paper
 import javax.annotation.Nonnull; // Paper
 
 public final class CraftServer implements Server {
-    private final String serverName = "Pufferfish"; // Paper // Pufferfish
+    private final String serverName = "Dice"; // Paper // Pufferfish
     private final String serverVersion;
     private final String bukkitVersion = Versioning.getBukkitVersion();
     private final Logger logger = Logger.getLogger("Minecraft");
@@ -562,6 +552,13 @@ public final class CraftServer implements Server {
             this.helpMap.initializeCommands();
             this.syncCommands();
         }
+
+        final List<String> blocked = Arrays.asList("FURNACE",  "CHEST",  "TRAPPED_CHEST",  "BEACON",  "DISPENSER",  "DROPPER",  "HOPPER",  "WORKBENCH",  "ENCHANTMENT_TABLE",  "ENDER_CHEST",  "ANVIL",  "BED_BLOCK",  "FENCE_GATE",  "SPRUCE_FENCE_GATE",  "BIRCH_FENCE_GATE",  "ACACIA_FENCE_GATE",  "JUNGLE_FENCE_GATE",  "DARK_OAK_FENCE_GATE",  "IRON_DOOR_BLOCK",  "WOODEN_DOOR",  "SPRUCE_DOOR",  "BIRCH_DOOR",  "JUNGLE_DOOR",  "ACACIA_DOOR",  "DARK_OAK_DOOR",  "WOOD_BUTTON",  "STONE_BUTTON",  "TRAP_DOOR",  "IRON_TRAPDOOR",  "DIODE_BLOCK_OFF",  "DIODE_BLOCK_ON",  "REDSTONE_COMPARATOR_OFF",  "REDSTONE_COMPARATOR_ON",  "FENCE",  "SPRUCE_FENCE",  "BIRCH_FENCE",  "JUNGLE_FENCE",  "DARK_OAK_FENCE",  "ACACIA_FENCE",  "NETHER_FENCE",  "BREWING_STAND",  "CAULDRON",  "LEGACY_SIGN_POST",  "LEGACY_WALL_SIGN",  "LEGACY_SIGN",  "ACACIA_SIGN",  "ACACIA_WALL_SIGN",  "BIRCH_SIGN",  "BIRCH_WALL_SIGN",  "DARK_OAK_SIGN",  "DARK_OAK_WALL_SIGN",  "JUNGLE_SIGN",  "JUNGLE_WALL_SIGN",  "OAK_SIGN",  "OAK_WALL_SIGN",  "SPRUCE_SIGN",  "SPRUCE_WALL_SIGN",  "LEVER",  "BLACK_SHULKER_BOX",  "BLUE_SHULKER_BOX",  "BROWN_SHULKER_BOX",  "CYAN_SHULKER_BOX",  "GRAY_SHULKER_BOX",  "GREEN_SHULKER_BOX",  "LIGHT_BLUE_SHULKER_BOX",  "LIME_SHULKER_BOX",  "MAGENTA_SHULKER_BOX",  "ORANGE_SHULKER_BOX",  "PINK_SHULKER_BOX",  "PURPLE_SHULKER_BOX",  "RED_SHULKER_BOX",  "SILVER_SHULKER_BOX",  "WHITE_SHULKER_BOX",  "YELLOW_SHULKER_BOX",  "DAYLIGHT_DETECTOR_INVERTED",  "DAYLIGHT_DETECTOR",  "BARREL",  "BLAST_FURNACE",  "SMOKER",  "CARTOGRAPHY_TABLE",  "COMPOSTER",  "GRINDSTONE",  "LECTERN",  "LOOM",  "STONECUTTER",  "BELL");
+
+
+
+        Bukkit.getPluginManager().registerEvents(new ArmorListener(blocked), new MinecraftInternalPlugin());
+        Bukkit.getPluginManager().registerEvents(new DispenserArmorListener(), new MinecraftInternalPlugin());
     }
 
     public void disablePlugins() {
